<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redirección a WhatsApp</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root { --bg:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#9ca3af; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100svh; display: grid; place-items: center;
      background: radial-gradient(1200px 800px at 20% -10%, #1f2937 0%, #0b1120 40%, var(--bg) 100%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      color: var(--text);
    }
    .card {
      width: min(520px, 92vw); padding: 24px 22px; border-radius: 16px;
      background: linear-gradient(180deg, #0b1220 0%, #0e1627 100%);
      border: 1px solid rgba(255,255,255,.06); box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1 { font-size: 22px; margin: 0 0 8px; letter-spacing:.2px; }
    p { margin: 8px 0; color: var(--muted); line-height: 1.4; }
    .row { display:flex; align-items:center; gap:10px; margin-top:10px; flex-wrap: wrap; }
    .btn {
      appearance: none; border: 0; border-radius: 12px; padding: 12px 16px;
      background: #22c55e; color: #051b0b; font-weight: 700; cursor: pointer;
      transition: transform .06s ease, filter .2s ease; text-decoration: none;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .ghost {
      background: transparent; color: var(--text); border: 1px dashed rgba(255,255,255,.2);
    }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      background: rgba(255,255,255,.06); padding:.2em .45em; border-radius:8px; color:#e2e8f0;
    }
    .status { display:flex; align-items:center; gap:10px; margin-top: 14px; }
    .dot {
      width: 10px; height: 10px; border-radius: 50%; background: #22c55e; box-shadow: 0 0 16px #22c55e66;
      animation: pulse 1.2s infinite ease-in-out;
    }
    @keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.35)} }
    .small { font-size: 12px; opacity:.8 }
  </style>
</head>
<body>
  <main class="card" role="main" aria-live="polite">
    <h1>Redirigiendo a WhatsApp…</h1>
    <p>Estamos abriendo tu conversación. Si no se abre sola en unos segundos, tocá el botón.</p>

    <div class="status"><span class="dot" aria-hidden="true"></span><span id="status-text">Preparando enlace…</span></div>

    <div class="row">
      <a id="open-now" class="btn" href="#" rel="noopener">Abrir ahora</a>
      <button id="copy-link" class="btn ghost" type="button">Copiar enlace</button>
    </div>

    <noscript>
      <p><strong>JavaScript está deshabilitado.</strong> Abrí manualmente este enlace:</p>
      <p><a href="https://wa.me/5989XXXXXXXX?text=Hola%20%F0%9F%91%8B%20vengo%20desde%20la%20web." class="btn">Abrir WhatsApp</a></p>
    </noscript>
  </main>

  <script>
    // ========= CONFIGURACIÓN =========
    // Cambiá por tu número (sin '+' ni espacios). Ejemplo UY: 5989XXXXXXXX
    const PHONE_NUMBER   = '5492236048941';
    // Cambiá el mensaje preestablecido:
    const PRESET_MESSAGE = 'Hola quiero mi bono del 25%.';

    // (Opcional) permitir override por querystring:
    // ?phone=5989YYYYYYYY&msg=Hola%20desde%20el%20link
    const params = new URLSearchParams(location.search);
    const phoneOverride = params.get('phone');
    const msgOverride   = params.get('msg');

    const phone  = (phoneOverride || PHONE_NUMBER).replace(/[^\d]/g, '');
    const text   = encodeURIComponent(msgOverride || PRESET_MESSAGE);

    // Detección simple de plataforma
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    const isAndroid = /android/i.test(ua);
    const isIOS     = /iphone|ipad|ipod/i.test(ua);
    const isMobile  = isAndroid || isIOS;

    // Rutas de destino
    const urlWeb    = `https://wa.me/${phone}?text=${text}`;
    const urlApp    = `whatsapp://send?phone=${phone}&text=${text}`;

    // Elementos UI
    const statusText = document.getElementById('status-text');
    const openNow    = document.getElementById('open-now');
    const copyBtn    = document.getElementById('copy-link');

    // Setear href del botón "Abrir ahora" (si es móvil intenta app, si no, web)
    const primaryHref = isMobile ? urlApp : urlWeb;
    openNow.href = primaryHref;

    // Copiar enlace al portapapeles
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(urlWeb);
        copyBtn.textContent = '¡Enlace copiado!';
        setTimeout(() => (copyBtn.textContent = 'Copiar enlace'), 1800);
      } catch {
        window.prompt('Copiá el enlace con Ctrl+C / Cmd+C y aceptá:', urlWeb);
      }
    });

    // Redirección automática con fallback
    // 1) Si es móvil, intentamos abrir la app. Si falla, vamos a wa.me.
    // 2) En escritorio, vamos directo a wa.me.
    function tryOpen() {
      statusText.textContent = 'Abriendo conversación…';
      if (isMobile) {
        // Intento app inmediata
        window.location.href = urlApp;

        // Fallback silencioso a Web después de ~1.2s (si la app no capturó la intent)
        setTimeout(() => {
          // Si el usuario todavía está en esta pestaña, mandamos a wa.me
          if (!document.hidden) {
            statusText.textContent = 'No se pudo abrir la app, intentando WhatsApp Web…';
            window.location.href = urlWeb;
          }
        }, 1200);
      } else {
        window.location.href = urlWeb;
      }
    }

    // Arranque automático con un breve delay para que cargue la UI
    setTimeout(tryOpen, 650);

    // Por si el usuario hace clic manualmente:
    openNow.addEventListener('click', (e) => {
      // Si es móvil y el href ya es whatsapp://, dejamos por defecto.
      if (!isMobile) {
        // En desktop reforzamos ir a wa.me
        e.preventDefault();
        window.location.href = urlWeb;
      }
    });
  </script>
</body>
</html>



